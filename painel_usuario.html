<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painel — Usuário</title>
</head>
<body>
  <header>
    <h1>Olá, [Nome]</h1>
    <nav>
      <a href="#" title="Sair">Sair</a>
    </nav>
  </header>

  <main>
    <section aria-labelledby="carteirinha">
      <h2 id="carteirinha">Carteirinha Digital</h2>
      <div>
        <!-- Placeholder para QR Code gerado dinamicamente -->
        <img id="qr-img" src="placeholder-qr.png" alt="QR Code do usuário (placeholder)" width="200" height="200" />
      </div>

      <!-- Nenhuma informação pessoal é exibida nesta vista; Nome, RA e Email estão codificados no QR da carteirinha. -->
    </section>

    <section id="gestao-salas" aria-label="Controlo de salas do usuário">
      <div>
        <button type="button" id="btn-criar-sala">Criar Nova Sala de Jogo</button>
      </div>

      <h3 id="minhas-salas-title">Minhas Salas</h3>
      <ul id="minhas-salas" aria-labelledby="minhas-salas-title">
        <!-- IDs das salas criadas aparecerão aqui -->
      </ul>
    </section>

    <script>
      // Script simples para criar e listar salas (usa localStorage para persistência local)
      (function(){
        const btnCriar = document.getElementById('btn-criar-sala');
        const lista = document.getElementById('minhas-salas');
        const STORAGE_KEY = 'savepoint_minhas_salas_v1';

        function gerarIdSala() {
          // Gera um ID curto: 6 caracteres alfanuméricos
          return Math.random().toString(36).slice(2, 8).toUpperCase();
        }

        function carregarSalas(){
          const raw = localStorage.getItem(STORAGE_KEY);
          return raw ? JSON.parse(raw) : [];
        }

        function salvarSalas(salas){
          localStorage.setItem(STORAGE_KEY, JSON.stringify(salas));
        }

        function renderSalas(){
          const salas = carregarSalas();
          lista.innerHTML = '';
          if(salas.length === 0){
            const li = document.createElement('li');
            li.textContent = 'Nenhuma sala criada.';
            li.setAttribute('aria-live','polite');
            lista.appendChild(li);
            return;
          }
          salas.forEach(sala => {
            const li = document.createElement('li');
            li.textContent = sala.id + (sala.createdAt ? (' — ' + new Date(sala.createdAt).toLocaleString()) : '');
            lista.appendChild(li);
          });
        }

        btnCriar.addEventListener('click', function(){
          const salas = carregarSalas();
          const novoId = gerarIdSala();
          salas.push({ id: novoId, createdAt: Date.now() });
          salvarSalas(salas);
          renderSalas();
        });

        // Inicializa lista ao carregar a página
        renderSalas();
      })();
    </script>
  </main>

  <footer>
    <small>© Savepoint Ludoteca</small>
  </footer>
</body>
</html>